language: node_js
node_js:
    - "4.4"
branches:
    only:
        - master
before_script:
    - npm install -g gulp
    - git config --global user.name 'DW via Travis CI'
    - git config --global user.email 'questions@davidwesst.com'
    - sed -i'' "s~git@github.com:davidwesst/dw-www.git~https://${GH_TOKEN}:x-oauth-basic@github.com/davidwesst/dw-www.git~" gulpfile.js
script:
    - gulp build
    - echo $TRAVIS_NODE_VERSION
    - if [ "$TRAVIS_NODE_VERSION" == "4.4" ] && [ "$TRAVIS_BRANCH" != "master" ] && [ "$TRAVIS_TEST_RESULT" == 0 ]; then gulp deploy; fi